## Συνοπτική περιγραφή λειτουργίας

### Περιγραφή λειτουργίας server

Ο server δέχεται τις παραμέτρους -p και -h. Με την παράμετρο -h εμφανίζει ένα κείμενο βοήθειας. Με την παράμετρο [-p πορτα] καθορίζεται η πόρτα στην οποία θα περιμένει για συνδέσεις, ενώ αν η παράμετρος παραλειφθεί τότε θα χρησιμοποιηθεί η πόρτα που ορίζεται στη σταθερά ADRESS_PORT στο αρχείο network.h. 
Αρχικά ο server εξετάζει αν υπάρχει το αρχείο που ορίζεται στη σταθερά ACCESS_LIST στο network.h και περιέχει τα username/password/uid με τα οποία ο client μπορεί να εισέλθει στο σύστημα. Αν το αρχείο δεν υπάρχει τότε το πρόγραμμα τερματίζει ανεπιτυχώς. Στη συνέχεια δημιουργείται ένα νέο socket τύπου PF_INET, SOCK_STREAM για χρήση του πρωτοκόλλου TCP και αρχικοποιείται κατάλληλα η (struct sockaddr_in) server_address. Ακολουθεί η εντολή bind η οποία συνδυάζει το socket που έχει δημιουργηθεί με τα υπόλοιπα χαρακτηριστικά που έχουμε ορίσει να έχει ο server στην server_address (ip, port κλπ.). Στη συνέχεια η εντολή listen βάζει το server σε κατάσταση ακρόασης για να συνδεθούν clients. Έπειτα υπάρχει ένας ατέρμον βρόγχος που εκτελεί τη συνάρτηση accept_connection. Η συνάρτηση αυτή περιέχει την εντολή accept η οποία είναι υπεύθυνη για την επίτευξη της σύνδεσης server-client. Αν επιτευχθεί η σύνδεση τότε δημιουργείται ένα νέο thread, με την pthread_create, το οποίο είναι υπεύθυνο για τις λειτουργίες του client αφήνοντας τον server να περιμένει για νέες συνδέσεις.

### Περιγραφή λειτουργίας client

Ο client δέχεται τις παραμέτρους -h, -p και -i. Με την παράμετρο -h εμφανίζει ένα κείμενο βοήθειας. Με την παράμετρο [-p πορτα] καθορίζεται η πόρτα στην οποία θα προσπαθήσει να συνδεθεί, ενώ αν η παράμετρος παραλειφθεί τότε θα χρησιμοποιηθεί η πόρτα που ορίζεται στη σταθερά ADRESS_PORT στο αρχείο network.h. Με την παράμετρο [-i hostname | ip] καθορίζεται το όνομα ή η διεύθυνση IP του server. Αν η παράμετρος αυτή παραλειφθεί τότε θα χρησιμοποιηθεί για διεύθυνση IP αυτή που ορίζεται στη σταθερά ADRESS_IP στο αρχείο network.h.
Αρχικά δημιουργείται ένα νέο socket τύπου PF_INET, SOCK_STREAM για χρήση του πρωτοκόλλου TCP και αρχικοποιείται κατάλληλα η (struct sockaddr_in) server_address. Ακολουθεί η εντολή gethostbyname η οποία μεταφράζει το hostname ή την ip του server σε network address. Στη συνέχεια η εντολή cennect πραγματοποιεί τη σύνδεση με το server.

### Πραγματοποίηση σύνδεσης

Εφόσον έχει επιτευχθεί η σύνδεση του client με το server, ακολουθεί μια διαδικασία πιστοποίησης (login) του χρήστη. Ο server αποστέλλει ένα μήνυμα στον client παροτρύνοντας τον για την εισαγωγή του ονόματος χρήστη. Στη συνέχεια λαμβάνει από τον client το όνομα χρήστη. Ακολουθείται η ίδια διαδικασία και για την εισαγωγή του κωδικού. Ο client έχει δικαίωμα για τρεις αποτυχημένες προσπάθειες, όπως ορίζεται από τη σταθερά MAXATTEMPTS στο αρχείο network.h. Κατά τη διαδικασία της πιστοποίησης ελέγχονται το όνομα χρήστη και ο κωδικός του από το αρχείο ACCESS_LIST και επιστρέφεται το ID (με τα δικαιώματα) του χρήστη. Σε περίπτωση επιτυχημένης πιστοποίησης ο server αποστέλλει το μήνυμα “Login successful” και εκτελεί τη συνάρτηση getCommand, ενώ ο client τη συνάρτηση sendCommand. Από τη μεριά του server η συνάρτηση getCommand μπαίνει σε έναν βρόγχο διαβάσματος και εκτέλεσης εντολών, με τη συνάρτηση execCommand, μέχρι να ληφθεί η εντολή “exit” όπου και κλείνει το socket. Ο client αντίστοιχα, μπαίνει σε ένα βρόγχο εισαγωγής εντολής από το χρήστη και αποστολή της εντολής αυτής στο server, διαβάζοντας στη συνέχεια από το socket τα αποτελέσματα της εντολής που έδωσε. 

## Πηγαίος κώδικας

Ο πηγαίος κώδικας αποτελείται από τα αρχεία : client.c  commands.c  commands.h  network.h  server.c 

Για τη μεταγλώττιση του client αρκεί η εντολή  : gcc client.c  -Wall -o client
Για τη μεταγλώττιση του server αρκεί η εντολή : gcc server.c commands.c -Wall -lpthread -o server
Ωστόσο, ο καλύτερος τρόπος μεταγλώττισης είναι με τις εντολές ./configure και make καθώς έτσι ελέγχονται οι απαιτούμενες βιβλιοθήκες.

Για τη σωστή λειτουργία του server απαιτείται η ύπαρξη του αρχείου που ορίζεται στη σταθερά ACCESS_LIST στο network.h. Το αρχείο αυτό πρέπει να έχει τη μορφή “username password uid”.
